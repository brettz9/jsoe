function cov_1a51c66cem(){var path="/Users/brett/jsoe/src/formats/indexedDBKey.js";var hash="9741288fbb86e2b92d91bf3e5e7fb55385767686";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/brett/jsoe/src/formats/indexedDBKey.js",statementMap:{"0":{start:{line:4,column:21},end:{line:46,column:1}},"1":{start:{line:5,column:15},end:{line:8,column:3}},"2":{start:{line:11,column:4},end:{line:27,column:5}},"3":{start:{line:17,column:6},end:{line:17,column:65}},"4":{start:{line:19,column:6},end:{line:22,column:15}},"5":{start:{line:30,column:4},end:{line:30,column:50}},"6":{start:{line:33,column:4},end:{line:33,column:37}},"7":{start:{line:34,column:4},end:{line:34,column:56}},"8":{start:{line:37,column:4},end:{line:42,column:5}},"9":{start:{line:38,column:6},end:{line:41,column:8}},"10":{start:{line:44,column:4},end:{line:44,column:21}},"11":{start:{line:53,column:30},end:{line:59,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:9},end:{line:5,column:10}},loc:{start:{line:5,column:15},end:{line:8,column:3}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:31},end:{line:28,column:3}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:35},end:{line:31,column:3}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:30},end:{line:35,column:3}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:44},end:{line:45,column:3}},line:36}},branchMap:{"0":{loc:{start:{line:11,column:4},end:{line:27,column:5}},type:"switch",locations:[{start:{line:16,column:4},end:{line:17,column:65}},{start:{line:18,column:4},end:{line:22,column:15}}],line:11},"1":{loc:{start:{line:37,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:42,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:37},"2":{loc:{start:{line:37,column:8},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:8},end:{line:37,column:14}},{start:{line:37,column:18},end:{line:37,column:43}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9741288fbb86e2b92d91bf3e5e7fb55385767686"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1a51c66cem=function(){return actualCoverage;};}return actualCoverage;}cov_1a51c66cem();import structuredCloning from'./structuredCloning.js';/** @type {import('../formats.js').Format} */const indexedDBKey=(cov_1a51c66cem().s[0]++,{types:()=>{cov_1a51c66cem().f[0]++;cov_1a51c66cem().s[1]++;return['number','SpecialRealNumber','string','ValidDate','array','buffersource'];},// A hack until we simply pass in our own types or do own parsing
testInvalid(newType,value){cov_1a51c66cem().f[1]++;cov_1a51c66cem().s[2]++;switch(newType){/* istanbul ignore next -- Shouldn't occur as it is a preset */case'SpecialRealNumber':/* istanbul ignore next -- Shouldn't occur as it is a preset */return Number.isNaN(value);case'ValidDate':cov_1a51c66cem().b[0][0]++;cov_1a51c66cem().s[3]++;return Number.isNaN(/** @type {Date} */value.getTime());case'array':cov_1a51c66cem().b[0][1]++;cov_1a51c66cem().s[4]++;return Object.keys(value).length!==/** @type {Array<import('../formats.js').StructuredCloneValue>} */value.length;/* istanbul ignore next -- Shouldn't occur */default:/* istanbul ignore next -- Shouldn't occur */return false;// Todo: Should this throw?
}},convertFromTypeson(typesonType){cov_1a51c66cem().f[2]++;cov_1a51c66cem().s[5]++;return typesonToIndexedDBKey.get(typesonType);},iterate(records,stateObj){cov_1a51c66cem().f[3]++;cov_1a51c66cem().s[6]++;stateObj.format='indexedDBKey';cov_1a51c66cem().s[7]++;return structuredCloning.iterate(records,stateObj);},getTypesAndSchemasForState(types,state){cov_1a51c66cem().f[4]++;cov_1a51c66cem().s[8]++;if((cov_1a51c66cem().b[2][0]++,!state)||(cov_1a51c66cem().b[2][1]++,['array'].includes(state))){cov_1a51c66cem().b[1][0]++;cov_1a51c66cem().s[9]++;return{types:this.types(),schemaObjects:[]};}else{cov_1a51c66cem().b[1][1]++;}// Can't be object, so shouldn't normally reach here
cov_1a51c66cem().s[10]++;return undefined;}});/**
 * @type {Map<import('../types.js').AvailableType,
*   import('../types.js').AvailableType>
* }
*/const typesonToIndexedDBKey=(cov_1a51c66cem().s[11]++,new Map([// This shouldn't occur as it is a preset
['SpecialNumber','SpecialRealNumber'],['date','ValidDate'],// 'sparseArrays', 'array',
['arrayNonindexKeys','array']]));export default indexedDBKey;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWE1MWM2NmNlbSIsImFjdHVhbENvdmVyYWdlIiwic3RydWN0dXJlZENsb25pbmciLCJpbmRleGVkREJLZXkiLCJzIiwidHlwZXMiLCJmIiwidGVzdEludmFsaWQiLCJuZXdUeXBlIiwidmFsdWUiLCJOdW1iZXIiLCJpc05hTiIsImIiLCJnZXRUaW1lIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImNvbnZlcnRGcm9tVHlwZXNvbiIsInR5cGVzb25UeXBlIiwidHlwZXNvblRvSW5kZXhlZERCS2V5IiwiZ2V0IiwiaXRlcmF0ZSIsInJlY29yZHMiLCJzdGF0ZU9iaiIsImZvcm1hdCIsImdldFR5cGVzQW5kU2NoZW1hc0ZvclN0YXRlIiwic3RhdGUiLCJpbmNsdWRlcyIsInNjaGVtYU9iamVjdHMiLCJ1bmRlZmluZWQiLCJNYXAiXSwic291cmNlcyI6WyJpbmRleGVkREJLZXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0cnVjdHVyZWRDbG9uaW5nIGZyb20gJy4vc3RydWN0dXJlZENsb25pbmcuanMnO1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLi4vZm9ybWF0cy5qcycpLkZvcm1hdH0gKi9cbmNvbnN0IGluZGV4ZWREQktleSA9IHtcbiAgdHlwZXM6ICgpID0+IFtcbiAgICAnbnVtYmVyJywgJ1NwZWNpYWxSZWFsTnVtYmVyJywgJ3N0cmluZycsICdWYWxpZERhdGUnLCAnYXJyYXknLFxuICAgICdidWZmZXJzb3VyY2UnXG4gIF0sXG4gIC8vIEEgaGFjayB1bnRpbCB3ZSBzaW1wbHkgcGFzcyBpbiBvdXIgb3duIHR5cGVzIG9yIGRvIG93biBwYXJzaW5nXG4gIHRlc3RJbnZhbGlkIChuZXdUeXBlLCB2YWx1ZSkge1xuICAgIHN3aXRjaCAobmV3VHlwZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0tIFNob3VsZG4ndCBvY2N1ciBhcyBpdCBpcyBhIHByZXNldCAqL1xuICAgIGNhc2UgJ1NwZWNpYWxSZWFsTnVtYmVyJzpcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0tIFNob3VsZG4ndCBvY2N1ciBhcyBpdCBpcyBhIHByZXNldCAqL1xuICAgICAgcmV0dXJuIE51bWJlci5pc05hTih2YWx1ZSk7XG4gICAgY2FzZSAnVmFsaWREYXRlJzpcbiAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oLyoqIEB0eXBlIHtEYXRlfSAqLyAodmFsdWUpLmdldFRpbWUoKSk7XG4gICAgY2FzZSAnYXJyYXknOlxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggIT09XG4gICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydCgnLi4vZm9ybWF0cy5qcycpLlN0cnVjdHVyZWRDbG9uZVZhbHVlPn0gKi8gKFxuICAgICAgICB2YWx1ZVxuICAgICAgKS5sZW5ndGg7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgLS0gU2hvdWxkbid0IG9jY3VyICovXG4gICAgZGVmYXVsdDpcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0tIFNob3VsZG4ndCBvY2N1ciAqL1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBUb2RvOiBTaG91bGQgdGhpcyB0aHJvdz9cbiAgICB9XG4gIH0sXG4gIGNvbnZlcnRGcm9tVHlwZXNvbiAodHlwZXNvblR5cGUpIHtcbiAgICByZXR1cm4gdHlwZXNvblRvSW5kZXhlZERCS2V5LmdldCh0eXBlc29uVHlwZSk7XG4gIH0sXG4gIGl0ZXJhdGUgKHJlY29yZHMsIHN0YXRlT2JqKSB7XG4gICAgc3RhdGVPYmouZm9ybWF0ID0gJ2luZGV4ZWREQktleSc7XG4gICAgcmV0dXJuIHN0cnVjdHVyZWRDbG9uaW5nLml0ZXJhdGUocmVjb3Jkcywgc3RhdGVPYmopO1xuICB9LFxuICBnZXRUeXBlc0FuZFNjaGVtYXNGb3JTdGF0ZSAodHlwZXMsIHN0YXRlKSB7XG4gICAgaWYgKCFzdGF0ZSB8fCBbJ2FycmF5J10uaW5jbHVkZXMoc3RhdGUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlczogdGhpcy50eXBlcygpLFxuICAgICAgICBzY2hlbWFPYmplY3RzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ2FuJ3QgYmUgb2JqZWN0LCBzbyBzaG91bGRuJ3Qgbm9ybWFsbHkgcmVhY2ggaGVyZVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbi8qKlxuICogQHR5cGUge01hcDxpbXBvcnQoJy4uL3R5cGVzLmpzJykuQXZhaWxhYmxlVHlwZSxcbiogICBpbXBvcnQoJy4uL3R5cGVzLmpzJykuQXZhaWxhYmxlVHlwZT5cbiogfVxuKi9cbmNvbnN0IHR5cGVzb25Ub0luZGV4ZWREQktleSA9IG5ldyBNYXAoW1xuICAvLyBUaGlzIHNob3VsZG4ndCBvY2N1ciBhcyBpdCBpcyBhIHByZXNldFxuICBbJ1NwZWNpYWxOdW1iZXInLCAnU3BlY2lhbFJlYWxOdW1iZXInXSxcbiAgWydkYXRlJywgJ1ZhbGlkRGF0ZSddLFxuICAvLyAnc3BhcnNlQXJyYXlzJywgJ2FycmF5JyxcbiAgWydhcnJheU5vbmluZGV4S2V5cycsICdhcnJheSddXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgaW5kZXhlZERCS2V5O1xuIl0sIm1hcHBpbmdzIjoic3BGQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLE1BQU8sQ0FBQUUsaUJBQWlCLEtBQU0sd0JBQXdCLENBRXRELDZDQUNBLEtBQU0sQ0FBQUMsWUFBWSxFQUFBSCxjQUFBLEdBQUFJLENBQUEsTUFBRyxDQUNuQkMsS0FBSyxDQUFFQSxDQUFBLEdBQU0sQ0FBQUwsY0FBQSxHQUFBTSxDQUFBLE1BQUFOLGNBQUEsR0FBQUksQ0FBQSxhQUNYLFFBQVEsQ0FBRSxtQkFBbUIsQ0FBRSxRQUFRLENBQUUsV0FBVyxDQUFFLE9BQU8sQ0FDN0QsY0FBYyxDQUNmLENBQUQsQ0FBQyxDQUNEO0FBQ0FHLFdBQVdBLENBQUVDLE9BQU8sQ0FBRUMsS0FBSyxDQUFFLENBQUFULGNBQUEsR0FBQU0s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